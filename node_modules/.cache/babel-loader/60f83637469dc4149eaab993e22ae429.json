{"ast":null,"code":"import { ref, onBeforeUpdate } from \"vue\";\nconst __default__ = {\n  data: () => ({\n    description: \"拼图小游戏\"\n  })\n};\nexport default /*#__PURE__*/Object.assign(__default__, {\n  __name: 'Game',\n\n  setup(__props, {\n    expose\n  }) {\n    expose();\n\n    let url = require(\"../../../assets/logo.png\");\n\n    const img = ref(url);\n    const show_img = ref(false);\n    const txt = ref(\"查看原图\");\n    const divs = ref([]);\n    const arr = ref([]);\n    const success = ref(false); //游戏状态\n\n    /**\r\n     * @description:换图片\r\n     * @param {*}\r\n     * @return {*}\r\n     */\n\n    const onChange = file => {\n      img.value = URL.createObjectURL(file.raw);\n      get_nums(); // console.log(URL.createObjectURL(file.raw));\n    };\n    /**\r\n     * @description: 查看原图\r\n     * @param {*}\r\n     * @return {*}\r\n     */\n\n\n    const see_img = () => {\n      show_img.value = !show_img.value;\n      txt.value = show_img.value ? \"继续游戏\" : \"查看原图\";\n    };\n    /**\r\n     * @description:初始化,生成1-16的16个随机排列的数字\r\n     * @param {*}\r\n     * @return {*}\r\n     */\n\n\n    const get_nums = () => {\n      txt.value = \"查看原图\";\n      show_img.value = false;\n      success.value = false;\n      arr.value.length = 0;\n\n      for (let i = 1; i < 16; i++) {\n        arr.value.push(i);\n      } // eslint-disable-next-line no-constant-condition\n\n\n      while (true) {\n        arr.value.sort(() => 0.5 - Math.random());\n\n        if (check_nums(arr.value)) {\n          break;\n        }\n      }\n\n      arr.value.push(16);\n    };\n    /**\r\n     * @description: 检查打乱后的数组是否合理\r\n     * @param {*}\r\n     * @return {*}\r\n     */\n\n\n    const check_nums = arr => {\n      let count = 0;\n\n      for (let i = 0; i < 15; i++) {\n        for (let j = i + 1; j < 15; j++) {\n          if (arr[j] < arr[i]) {\n            count++;\n          }\n        }\n      }\n\n      return count % 2 === 0;\n    };\n    /**\r\n     * @description:检查是否拼图成功\r\n     * @param {*}\r\n     * @return {*}\r\n     */\n\n\n    const check_finish = () => {\n      let bool = arr.value.every((item, i) => {\n        return item == i + 1;\n      });\n      bool && (success.value = true);\n    };\n    /**\r\n     * @description:图片点击事件,移动图片\r\n     * @param {*}\r\n     * @return {*}\r\n     */\n\n\n    const move_img = (i, e) => {\n      let top = e.target.offsetTop;\n      let left = e.target.offsetLeft;\n      let top_16 = divs.value[15].offsetTop;\n      let left_16 = divs.value[15].offsetLeft;\n      let x = Math.abs(left - left_16);\n      let y = Math.abs(top - top_16);\n\n      if (x == 100 && top == top_16 || y == 100 && left == left_16) {\n        let a = arr.value[15];\n        arr.value[15] = arr.value[i];\n        arr.value[i] = a;\n        check_finish();\n      }\n    };\n\n    get_nums(); // 确保在每次更新之前重置ref\n\n    onBeforeUpdate(() => {\n      divs.value = [];\n    });\n    const __returned__ = {\n      url,\n      img,\n      show_img,\n      txt,\n      divs,\n      arr,\n      success,\n      onChange,\n      see_img,\n      get_nums,\n      check_nums,\n      check_finish,\n      move_img,\n      ref,\n      onBeforeUpdate\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n\n});","map":{"version":3,"mappings":"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","names":["ref","onBeforeUpdate","data","description","url","require","img","show_img","txt","divs","arr","success","onChange","file","value","URL","createObjectURL","raw","get_nums","see_img","length","i","push","sort","Math","random","check_nums","count","j","check_finish","bool","every","item","move_img","e","top","target","offsetTop","left","offsetLeft","top_16","left_16","x","abs","y","a"],"sources":["C:/Users/Administrator/Desktop/vue3-element-admin-dev/src/views/layoutpages/leisure/Game.vue"],"sourcesContent":["<template>\r\n    <div id=\"ve_puzzle\">\r\n        <div\r\n            class=\"ve_artwork\"\r\n            :style=\"{\r\n                backgroundImage: show_img || success ? `url(${img})` : 'none',\r\n            }\"\r\n        >\r\n            <div\r\n                v-for=\"i in 16\"\r\n                :key=\"i\"\r\n                :class=\"['ve_item_box', `pic${i}`, `img${arr[i - 1]}`, show_img || success ? 've_show_img' : '', success && i == 16 ? 've_finish' : '']\"\r\n                :style=\"{\r\n                    backgroundImage: i == 16 ? (success ? `url(${img})` : 'none') : `url(${img})`,\r\n                }\"\r\n                :ref=\"\r\n                    (el) => {\r\n                        if (el) divs[i - 1] = el;\r\n                    }\r\n                \"\r\n                @click.self.stop=\"move_img(i - 1, $event)\"\r\n            />\r\n        </div>\r\n        <div class=\"ve_button\">\r\n            <div class=\"ve_game_button\">\r\n                <el-row :gutter=\"10\">\r\n                    <el-col :span=\"12\" :offset=\"0\">\r\n                        <el-button type=\"primary\" @click=\"get_nums()\" style=\"width: 100%\">重新开始</el-button>\r\n                    </el-col>\r\n                    <el-col :span=\"12\" :offset=\"0\">\r\n                        <el-button style=\"width: 100%\" :type=\"show_img ? 'success' : 'info'\" @click=\"see_img()\" :disabled=\"success\">\r\n                            {{ txt }}\r\n                        </el-button>\r\n                    </el-col>\r\n                </el-row>\r\n            </div>\r\n            <div class=\"ve_upload\">\r\n                <el-upload style=\"width: 100%\" action=\"\" accept=\"image/png, image/jpeg\" ref=\"upload\" :on-change=\"onChange\" :auto-upload=\"false\" :show-file-list=\"false\">\r\n                    <el-button style=\"width: 100%\" type=\"danger\">用我的萌照</el-button>\r\n                </el-upload>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data: () => ({\r\n        description: \"拼图小游戏\",\r\n    }),\r\n};\r\n</script>\r\n\r\n<script setup>\r\nimport { ref, onBeforeUpdate } from \"vue\";\r\nlet url = require(\"../../../assets/logo.png\");\r\nconst img = ref(url);\r\nconst show_img = ref(false);\r\nconst txt = ref(\"查看原图\");\r\nconst divs = ref([]);\r\nconst arr = ref([]);\r\nconst success = ref(false); //游戏状态\r\n/**\r\n * @description:换图片\r\n * @param {*}\r\n * @return {*}\r\n */\r\nconst onChange = (file) => {\r\n    img.value = URL.createObjectURL(file.raw);\r\n    get_nums();\r\n    // console.log(URL.createObjectURL(file.raw));\r\n};\r\n\r\n/**\r\n * @description: 查看原图\r\n * @param {*}\r\n * @return {*}\r\n */\r\nconst see_img = () => {\r\n    show_img.value = !show_img.value;\r\n    txt.value = show_img.value ? \"继续游戏\" : \"查看原图\";\r\n};\r\n/**\r\n * @description:初始化,生成1-16的16个随机排列的数字\r\n * @param {*}\r\n * @return {*}\r\n */\r\nconst get_nums = () => {\r\n    txt.value = \"查看原图\";\r\n    show_img.value = false;\r\n    success.value = false;\r\n    arr.value.length = 0;\r\n    for (let i = 1; i < 16; i++) {\r\n        arr.value.push(i);\r\n    }\r\n    // eslint-disable-next-line no-constant-condition\r\n    while (true) {\r\n        arr.value.sort(() => 0.5 - Math.random());\r\n        if (check_nums(arr.value)) {\r\n            break;\r\n        }\r\n    }\r\n    arr.value.push(16);\r\n};\r\n/**\r\n * @description: 检查打乱后的数组是否合理\r\n * @param {*}\r\n * @return {*}\r\n */\r\nconst check_nums = (arr) => {\r\n    let count = 0;\r\n    for (let i = 0; i < 15; i++) {\r\n        for (let j = i + 1; j < 15; j++) {\r\n            if (arr[j] < arr[i]) {\r\n                count++;\r\n            }\r\n        }\r\n    }\r\n    return count % 2 === 0;\r\n};\r\n/**\r\n * @description:检查是否拼图成功\r\n * @param {*}\r\n * @return {*}\r\n */\r\nconst check_finish = () => {\r\n    let bool = arr.value.every((item, i) => {\r\n        return item == i + 1;\r\n    });\r\n    bool && (success.value = true);\r\n};\r\n/**\r\n * @description:图片点击事件,移动图片\r\n * @param {*}\r\n * @return {*}\r\n */\r\nconst move_img = (i, e) => {\r\n    let top = e.target.offsetTop;\r\n    let left = e.target.offsetLeft;\r\n    let top_16 = divs.value[15].offsetTop;\r\n    let left_16 = divs.value[15].offsetLeft;\r\n    let x = Math.abs(left - left_16);\r\n    let y = Math.abs(top - top_16);\r\n    if ((x == 100 && top == top_16) || (y == 100 && left == left_16)) {\r\n        let a = arr.value[15];\r\n        arr.value[15] = arr.value[i];\r\n        arr.value[i] = a;\r\n        check_finish();\r\n    }\r\n};\r\nget_nums();\r\n// 确保在每次更新之前重置ref\r\nonBeforeUpdate(() => {\r\n    divs.value = [];\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n#ve_puzzle {\r\n    margin-top: 10px;\r\n    .ve_artwork {\r\n        margin: 0 auto;\r\n        position: relative;\r\n        width: 399px;\r\n        height: 399px;\r\n        background-size: 399px;\r\n        box-shadow: 1px 1px 10px rgb(168, 168, 168), -1px -1px 10px rgb(168, 168, 168);\r\n\r\n        .ve_item_box {\r\n            opacity: 1;\r\n            cursor: pointer;\r\n            position: absolute;\r\n            z-index: 2;\r\n            width: 99px;\r\n            height: 99px;\r\n            transition: all 0.2s;\r\n            background-repeat: no-repeat;\r\n            background-size: 399px;\r\n            &.ve_show_img {\r\n                opacity: 0;\r\n            }\r\n        }\r\n        @for $i from 1 through 4 {\r\n            @for $j from ($i - 1) * 4 + 1 through ($i - 1) * 4 + 4 {\r\n                .img#{$j} {\r\n                    top: #{($i - 1) * 100}px;\r\n                }\r\n                .pic#{$j} {\r\n                    background-position-y: -#{($i - 1) * 100}px;\r\n                }\r\n            }\r\n            @for $k from $i through $i + 3 {\r\n                .img#{ ($k - $i) * 4 + $i} {\r\n                    left: #{($i - 1) * 100}px;\r\n                }\r\n                .pic#{ ($k - $i) * 4 + $i} {\r\n                    background-position-x: -#{($i - 1) * 100}px;\r\n                }\r\n            }\r\n        }\r\n        .pic16 {\r\n            transition: none;\r\n            box-shadow: inset 1px 1px 10px rgb(168, 168, 168), inset -1px -1px 10px rgb(168, 168, 168);\r\n            z-index: 1;\r\n            &.ve_finish {\r\n                box-shadow: none;\r\n            }\r\n        }\r\n    }\r\n    .ve_button {\r\n        width: 409px;\r\n        margin: 0 auto;\r\n        .ve_game_button {\r\n            margin: 10px 0;\r\n        }\r\n    }\r\n    & :deep(.el-upload--text) {\r\n        width: 100%;\r\n    }\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, withModifiers as _withModifiers, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-91bf2f2a\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  id: \"ve_puzzle\"\n};\nconst _hoisted_2 = [\"onClick\"];\nconst _hoisted_3 = {\n  class: \"ve_button\"\n};\nconst _hoisted_4 = {\n  class: \"ve_game_button\"\n};\n\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\" 重新开始 \");\n\nconst _hoisted_6 = {\n  class: \"ve_upload\"\n};\n\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\" 用我的萌照 \");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n\n  const _component_el_col = _resolveComponent(\"el-col\");\n\n  const _component_el_row = _resolveComponent(\"el-row\");\n\n  const _component_el_upload = _resolveComponent(\"el-upload\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", {\n    class: \"ve_artwork\",\n    style: _normalizeStyle({\n      backgroundImage: $setup.show_img || $setup.success ? `url(${$setup.img})` : 'none'\n    })\n  }, [(_openBlock(), _createElementBlock(_Fragment, null, _renderList(16, i => {\n    return _createElementVNode(\"div\", {\n      key: i,\n      class: _normalizeClass(['ve_item_box', `pic${i}`, `img${$setup.arr[i - 1]}`, $setup.show_img || $setup.success ? 've_show_img' : '', $setup.success && i == 16 ? 've_finish' : '']),\n      style: _normalizeStyle({\n        backgroundImage: i == 16 ? $setup.success ? `url(${$setup.img})` : 'none' : `url(${$setup.img})`\n      }),\n      ref_for: true,\n      ref: el => {\n        if (el) $setup.divs[i - 1] = el;\n      },\n      onClick: _withModifiers($event => $setup.move_img(i - 1, $event), [\"self\", \"stop\"])\n    }, null, 14\n    /* CLASS, STYLE, PROPS */\n    , _hoisted_2);\n  }), 64\n  /* STABLE_FRAGMENT */\n  ))], 4\n  /* STYLE */\n  ), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_el_row, {\n    gutter: 10\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_col, {\n      span: 12,\n      offset: 0\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_button, {\n        type: \"primary\",\n        onClick: _cache[0] || (_cache[0] = $event => $setup.get_nums()),\n        style: {\n          \"width\": \"100%\"\n        }\n      }, {\n        default: _withCtx(() => [_hoisted_5]),\n        _: 1\n        /* STABLE */\n\n      })]),\n      _: 1\n      /* STABLE */\n\n    }), _createVNode(_component_el_col, {\n      span: 12,\n      offset: 0\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_button, {\n        style: {\n          \"width\": \"100%\"\n        },\n        type: $setup.show_img ? 'success' : 'info',\n        onClick: _cache[1] || (_cache[1] = $event => $setup.see_img()),\n        disabled: $setup.success\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.txt), 1\n        /* TEXT */\n        )]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"type\", \"disabled\"])]),\n      _: 1\n      /* STABLE */\n\n    })]),\n    _: 1\n    /* STABLE */\n\n  })]), _createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_el_upload, {\n    style: {\n      \"width\": \"100%\"\n    },\n    action: \"\",\n    accept: \"image/png, image/jpeg\",\n    ref: \"upload\",\n    \"on-change\": $setup.onChange,\n    \"auto-upload\": false,\n    \"show-file-list\": false\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_button, {\n      style: {\n        \"width\": \"100%\"\n      },\n      type: \"danger\"\n    }, {\n      default: _withCtx(() => [_hoisted_7]),\n      _: 1\n      /* STABLE */\n\n    })]),\n    _: 1\n    /* STABLE */\n\n  }, 512\n  /* NEED_PATCH */\n  )])])]);\n}","map":{"version":3,"mappings":";;;;;EAQSA,EAAE,EAAC;;;;EAiCCC,KAAK,EAAC;;;EACFA,KAAK,EAAC;;;iDAOE;;;EAgBRA,KAAK,EAAC;;;iDAU0C;;;;;;;;;;;uBAnE7DC,oBAyEM,KAzEN,cAyEM,CAxEFC,oBA+BM,KA/BN,EA+BM;IA9BFF,KAAK,EAAC,YA8BJ;IA7BDG,KAAK;uBAAsCC,mBAAYA,cAAZ,GAAmB,OAAUA,UAAG,GAAhC,GAAgC;IAAtE;EA6BJ,CA/BN,kBAMIH,oBAwBEI,SAxBF,EAwBE,IAxBF,EAwBEC,YAvBc,EAuBd,EAvBSC,CAAO,IAAN;WADZL,oBAwBE,KAxBF,EAwBE;MAtBGM,GAAG,EAAED,CAsBR;MArBGP,KAAK,wCAAmEO,CAAC,EAApE,QAAmGH,WAAIG,CAAC,IAAL,CAAK,EAAxG,EAAsIH,mBAAYA,cAAZ,GAAmB,aAAnB,GAAmB,EAAzJ,EAAqMA,kBAAWG,CAAC,MAAZ,GAAY,WAAZ,GAAY,EAAjN,EAqBR;MAdGJ,KAAK;yBAAmEI,CAAC,MAAD,GAAuCH,wBAAkDA,UAAG,GAArD,SAAvC,UAAgLA,UAAG;MAAtP,EAcR;mBAAA;MANGK,GAAG,EAAyBC,MAAE;YAAoCA,IAAIN,YAAKG,CAAC,IAAN,IAAcG,EAAd;OAMzE;MADGC,OAAK,2BAAYP,gBAASG,CAAC,IAAV,EAAgBK,MAAhB,CAAZ,EAAkC,gBAAlC;IACR,CAxBF;;IAAA;GAwBE,CAxBF;;EAAA,GANJ;;EAAA,CAwEE,EAxCFV,oBAuCM,KAvCN,cAuCM,CAtCFA,oBAsBM,KAtBN,cAsBM,CArBFW,aAoBSC,iBApBT,EAoBS;IApBAC,MAAM,EAAE;EAoBR,CApBT,EAAmB;sBACf,MAQS,CARTF,aAQSG,iBART,EAQS;MARAC,IAAI,EAAE,EAQN;MARWC,MAAM,EAAE;IAQnB,CART;wBACI,MAMY,CANZL,aAMYM,oBANZ,EAMY;QALRC,IAAI,EAAC,SAKG;QAJPT,OAAK,sCAAEP,iBAAF,CAIE;QAHRD,KAAmB,EAAnB;UAAA;QAAA;MAGQ,CANZ;0BAIC,MAED;;;;OANA,CAMY;;;;KAPhB,CAQS,EACTU,aASSG,iBATT,EASS;MATAC,IAAI,EAAE,EASN;MATWC,MAAM,EAAE;IASnB,CATT;wBACI,MAOY,CAPZL,aAOYM,oBAPZ,EAOY;QANRhB,KAAmB,EAAnB;UAAA;QAAA,CAMQ;QALPiB,IAAI,EAAEhB,kBAAQ,SAAR,GAAQ,MAKP;QAJPO,OAAK,sCAAEP,gBAAF,CAIE;QAHPiB,QAAQ,EAAEjB;MAGH,CAPZ;0BAMI,MAAS,mCAANA,aAAG;QAAA;SAAG;;;;OANb;;MAAA,uBAOY;;;;KARhB,CADS,EATM;;;;EAAA,CAAnB,CAqBE,CAtBN,CAsCE,EAfFF,oBAcM,KAdN,cAcM,CAbFW,aAYYS,oBAZZ,EAYY;IAXRnB,KAAmB,EAAnB;MAAA;IAAA,CAWQ;IAVRoB,MAAM,EAAC,EAUC;IATRC,MAAM,EAAC,uBASC;IARRf,GAAG,EAAC,QAQI;IAPP,aAAWL,eAOJ;IANP,eAAa,KAMN;IALP,kBAAgB;EAKT,CAZZ;sBASI,MAEY,CAFZS,aAEYM,oBAFZ,EAEY;MAFDhB,KAAmB,EAAnB;QAAA;MAAA,CAEC;MAFmBiB,IAAI,EAAC;IAExB,CAFZ;wBAA6C,MAE7C;;;;KAFA,CAEY;;;;GAXhB;;EAAA,CAaE,CAdN,CAeE,CAvCN,CAwCE,CAzEN","names":["id","class","_createElementBlock","_createElementVNode","style","$setup","_Fragment","_renderList","i","key","ref","el","onClick","$event","_createVNode","_component_el_row","gutter","_component_el_col","span","offset","_component_el_button","type","disabled","_component_el_upload","action","accept"],"sourceRoot":"","sources":["C:\\Users\\Administrator\\Desktop\\vue3-element-admin-dev\\src\\views\\layoutpages\\leisure\\Game.vue"],"sourcesContent":["<!--\r\n * @Author: xujianhua\r\n * @Date: 2021-04-01 17:06:04\r\n * @LastEditTime: 2021-11-30 18:55:11\r\n * @Description: file content\r\n * @FilePath: \\vue3-element-admin\\src\\views\\layoutpages\\leisure\\Game.vue\r\n-->\r\n<template>\r\n    <div id=\"ve_puzzle\">\r\n        <div\r\n            class=\"ve_artwork\"\r\n            :style=\"{\r\n                backgroundImage: show_img || success ? `url(${img})` : 'none',\r\n            }\"\r\n        >\r\n            <div\r\n                v-for=\"i in 16\"\r\n                :key=\"i\"\r\n                :class=\"[\r\n                    've_item_box',\r\n                    `pic${i}`,\r\n                    `img${arr[i - 1]}`,\r\n                    show_img || success ? 've_show_img' : '',\r\n                    success && i == 16 ? 've_finish' : '',\r\n                ]\"\r\n                :style=\"{\r\n                    backgroundImage:\r\n                        i == 16\r\n                            ? success\r\n                                ? `url(${img})`\r\n                                : 'none'\r\n                            : `url(${img})`,\r\n                }\"\r\n                :ref=\"\r\n                    (el) => {\r\n                        if (el) divs[i - 1] = el;\r\n                    }\r\n                \"\r\n                @click.self.stop=\"move_img(i - 1, $event)\"\r\n            />\r\n        </div>\r\n        <div class=\"ve_button\">\r\n            <div class=\"ve_game_button\">\r\n                <el-row :gutter=\"10\">\r\n                    <el-col :span=\"12\" :offset=\"0\">\r\n                        <el-button\r\n                            type=\"primary\"\r\n                            @click=\"get_nums()\"\r\n                            style=\"width: 100%\"\r\n                        >\r\n                            重新开始\r\n                        </el-button>\r\n                    </el-col>\r\n                    <el-col :span=\"12\" :offset=\"0\">\r\n                        <el-button\r\n                            style=\"width: 100%\"\r\n                            :type=\"show_img ? 'success' : 'info'\"\r\n                            @click=\"see_img()\"\r\n                            :disabled=\"success\"\r\n                        >\r\n                            {{ txt }}\r\n                        </el-button>\r\n                    </el-col>\r\n                </el-row>\r\n            </div>\r\n            <div class=\"ve_upload\">\r\n                <el-upload\r\n                    style=\"width: 100%\"\r\n                    action=\"\"\r\n                    accept=\"image/png, image/jpeg\"\r\n                    ref=\"upload\"\r\n                    :on-change=\"onChange\"\r\n                    :auto-upload=\"false\"\r\n                    :show-file-list=\"false\"\r\n                >\r\n                    <el-button style=\"width: 100%\" type=\"danger\">\r\n                        用我的萌照\r\n                    </el-button>\r\n                </el-upload>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data: () => ({\r\n        description: \"拼图小游戏\",\r\n    }),\r\n};\r\n</script>\r\n\r\n<script setup>\r\nimport { ref, onBeforeUpdate } from \"vue\";\r\nlet url = require(\"../../../assets/logo.png\");\r\nconst img = ref(url);\r\nconst show_img = ref(false);\r\nconst txt = ref(\"查看原图\");\r\nconst divs = ref([]);\r\nconst arr = ref([]);\r\nconst success = ref(false); //游戏状态\r\n/**\r\n * @description:换图片\r\n * @param {*}\r\n * @return {*}\r\n */\r\nconst onChange = (file) => {\r\n    img.value = URL.createObjectURL(file.raw);\r\n    get_nums();\r\n    // console.log(URL.createObjectURL(file.raw));\r\n};\r\n\r\n/**\r\n * @description: 查看原图\r\n * @param {*}\r\n * @return {*}\r\n */\r\nconst see_img = () => {\r\n    show_img.value = !show_img.value;\r\n    txt.value = show_img.value ? \"继续游戏\" : \"查看原图\";\r\n};\r\n/**\r\n * @description:初始化,生成1-16的16个随机排列的数字\r\n * @param {*}\r\n * @return {*}\r\n */\r\nconst get_nums = () => {\r\n    txt.value = \"查看原图\";\r\n    show_img.value = false;\r\n    success.value = false;\r\n    arr.value.length = 0;\r\n    for (let i = 1; i < 16; i++) {\r\n        arr.value.push(i);\r\n    }\r\n    // eslint-disable-next-line no-constant-condition\r\n    while (true) {\r\n        arr.value.sort(() => 0.5 - Math.random());\r\n        if (check_nums(arr.value)) {\r\n            break;\r\n        }\r\n    }\r\n    arr.value.push(16);\r\n};\r\n/**\r\n * @description: 检查打乱后的数组是否合理\r\n * @param {*}\r\n * @return {*}\r\n */\r\nconst check_nums = (arr) => {\r\n    let count = 0;\r\n    for (let i = 0; i < 15; i++) {\r\n        for (let j = i + 1; j < 15; j++) {\r\n            if (arr[j] < arr[i]) {\r\n                count++;\r\n            }\r\n        }\r\n    }\r\n    return count % 2 === 0;\r\n};\r\n/**\r\n * @description:检查是否拼图成功\r\n * @param {*}\r\n * @return {*}\r\n */\r\nconst check_finish = () => {\r\n    let bool = arr.value.every((item, i) => {\r\n        return item == i + 1;\r\n    });\r\n    bool && (success.value = true);\r\n};\r\n/**\r\n * @description:图片点击事件,移动图片\r\n * @param {*}\r\n * @return {*}\r\n */\r\nconst move_img = (i, e) => {\r\n    let top = e.target.offsetTop;\r\n    let left = e.target.offsetLeft;\r\n    let top_16 = divs.value[15].offsetTop;\r\n    let left_16 = divs.value[15].offsetLeft;\r\n    let x = Math.abs(left - left_16);\r\n    let y = Math.abs(top - top_16);\r\n    if ((x == 100 && top == top_16) || (y == 100 && left == left_16)) {\r\n        let a = arr.value[15];\r\n        arr.value[15] = arr.value[i];\r\n        arr.value[i] = a;\r\n        check_finish();\r\n    }\r\n};\r\nget_nums();\r\n// 确保在每次更新之前重置ref\r\nonBeforeUpdate(() => {\r\n    divs.value = [];\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n#ve_puzzle {\r\n    margin-top: 10px;\r\n    .ve_artwork {\r\n        margin: 0 auto;\r\n        position: relative;\r\n        width: 399px;\r\n        height: 399px;\r\n        background-size: 399px;\r\n        box-shadow: 1px 1px 10px rgb(168, 168, 168),\r\n            -1px -1px 10px rgb(168, 168, 168);\r\n\r\n        .ve_item_box {\r\n            opacity: 1;\r\n            cursor: pointer;\r\n            position: absolute;\r\n            z-index: 2;\r\n            width: 99px;\r\n            height: 99px;\r\n            transition: all 0.2s;\r\n            background-repeat: no-repeat;\r\n            background-size: 399px;\r\n            &.ve_show_img {\r\n                opacity: 0;\r\n            }\r\n        }\r\n        @for $i from 1 through 4 {\r\n            @for $j from ($i - 1) * 4 + 1 through ($i - 1) * 4 + 4 {\r\n                .img#{$j} {\r\n                    top: #{($i - 1) * 100}px;\r\n                }\r\n                .pic#{$j} {\r\n                    background-position-y: -#{($i - 1) * 100}px;\r\n                }\r\n            }\r\n            @for $k from $i through $i + 3 {\r\n                .img#{ ($k - $i) * 4 + $i} {\r\n                    left: #{($i - 1) * 100}px;\r\n                }\r\n                .pic#{ ($k - $i) * 4 + $i} {\r\n                    background-position-x: -#{($i - 1) * 100}px;\r\n                }\r\n            }\r\n        }\r\n        .pic16 {\r\n            transition: none;\r\n            box-shadow: inset 1px 1px 10px rgb(168, 168, 168),\r\n                inset -1px -1px 10px rgb(168, 168, 168);\r\n            z-index: 1;\r\n            &.ve_finish {\r\n                box-shadow: none;\r\n            }\r\n        }\r\n    }\r\n    .ve_button {\r\n        width: 409px;\r\n        margin: 0 auto;\r\n        .ve_game_button {\r\n            margin: 10px 0;\r\n        }\r\n    }\r\n    & :deep(.el-upload--text) {\r\n        width: 100%;\r\n    }\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}
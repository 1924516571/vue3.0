{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\n\n/*\r\n * @Author: your name\r\n * @Date: 2021-03-12 14:10:03\r\n * @LastEditTime: 2021-03-26 09:04:37\r\n * @LastEditors: Please set LastEditors\r\n * @Description: In User Settings Edit\r\n * @FilePath: \\vue3-element-admin\\src\\directives\\modules\\permission.js\r\n */\nconst permission = (el, binding, app, router, store) => {\n  const {\n    value\n  } = binding;\n\n  function checkArray(permission) {\n    let path = app.config.globalProperties.$route.name;\n\n    let _permission = permission.map(element => {\n      let url = path.replace(/-/g, \"/\") + \"/\" + element;\n      return url;\n    });\n\n    let arr = store.getters.permissionList;\n    return _permission.some(key => arr.includes(key));\n  }\n\n  if (value && value.length > 0) {\n    let hasPermission = checkArray(value);\n\n    if (!hasPermission) {\n      // 没有权限 移除Dom元素\n      el.parentNode && el.parentNode.removeChild(el);\n    }\n  }\n};\n\nexport default permission;","map":null,"metadata":{},"sourceType":"module"}
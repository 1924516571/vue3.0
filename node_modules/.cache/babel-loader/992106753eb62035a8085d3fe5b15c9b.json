{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\n\nconst permission = (el, binding, app, router, store) => {\n  const {\n    value\n  } = binding;\n\n  function checkArray(permission) {\n    let path = app.config.globalProperties.$route.name;\n\n    let _permission = permission.map(element => {\n      let url = path.replace(/-/g, \"/\") + \"/\" + element;\n      return url;\n    });\n\n    console.log(_permission, \"333\");\n    let arr = store.getters.permissionList;\n    console.log(arr, \"444\");\n    return _permission.some(key => arr.includes(key));\n  }\n\n  if (value && value.length > 0) {\n    let hasPermission = checkArray(value);\n\n    if (!hasPermission) {\n      // 没有权限 移除Dom元素\n      el.parentNode && el.parentNode.removeChild(el);\n    }\n  }\n};\n\nexport default permission;","map":{"version":3,"names":["permission","el","binding","app","router","store","value","checkArray","path","config","globalProperties","$route","name","_permission","map","element","url","replace","console","log","arr","getters","permissionList","some","key","includes","length","hasPermission","parentNode","removeChild"],"sources":["C:/Users/Administrator/Desktop/vue3-element-admin-dev/src/directives/modules/permission.js"],"sourcesContent":["const permission = (el, binding, app, router, store) => {\r\n    const { value } = binding;\r\n    function checkArray(permission) {\r\n        let path = app.config.globalProperties.$route.name;\r\n\r\n        let _permission = permission.map((element) => {\r\n            let url = path.replace(/-/g, \"/\") + \"/\" + element;\r\n            return url;\r\n        });\r\n        console.log(_permission, \"333\");\r\n        let arr = store.getters.permissionList;\r\n        console.log(arr, \"444\");\r\n        return _permission.some((key) => arr.includes(key));\r\n    }\r\n\r\n    if (value && value.length > 0) {\r\n        let hasPermission = checkArray(value);\r\n        if (!hasPermission) {\r\n            // 没有权限 移除Dom元素\r\n            el.parentNode && el.parentNode.removeChild(el);\r\n        }\r\n    }\r\n};\r\n\r\nexport default permission;\r\n"],"mappings":";;AAAA,MAAMA,UAAU,GAAG,CAACC,EAAD,EAAKC,OAAL,EAAcC,GAAd,EAAmBC,MAAnB,EAA2BC,KAA3B,KAAqC;EACpD,MAAM;IAAEC;EAAF,IAAYJ,OAAlB;;EACA,SAASK,UAAT,CAAoBP,UAApB,EAAgC;IAC5B,IAAIQ,IAAI,GAAGL,GAAG,CAACM,MAAJ,CAAWC,gBAAX,CAA4BC,MAA5B,CAAmCC,IAA9C;;IAEA,IAAIC,WAAW,GAAGb,UAAU,CAACc,GAAX,CAAgBC,OAAD,IAAa;MAC1C,IAAIC,GAAG,GAAGR,IAAI,CAACS,OAAL,CAAa,IAAb,EAAmB,GAAnB,IAA0B,GAA1B,GAAgCF,OAA1C;MACA,OAAOC,GAAP;IACH,CAHiB,CAAlB;;IAIAE,OAAO,CAACC,GAAR,CAAYN,WAAZ,EAAyB,KAAzB;IACA,IAAIO,GAAG,GAAGf,KAAK,CAACgB,OAAN,CAAcC,cAAxB;IACAJ,OAAO,CAACC,GAAR,CAAYC,GAAZ,EAAiB,KAAjB;IACA,OAAOP,WAAW,CAACU,IAAZ,CAAkBC,GAAD,IAASJ,GAAG,CAACK,QAAJ,CAAaD,GAAb,CAA1B,CAAP;EACH;;EAED,IAAIlB,KAAK,IAAIA,KAAK,CAACoB,MAAN,GAAe,CAA5B,EAA+B;IAC3B,IAAIC,aAAa,GAAGpB,UAAU,CAACD,KAAD,CAA9B;;IACA,IAAI,CAACqB,aAAL,EAAoB;MAChB;MACA1B,EAAE,CAAC2B,UAAH,IAAiB3B,EAAE,CAAC2B,UAAH,CAAcC,WAAd,CAA0B5B,EAA1B,CAAjB;IACH;EACJ;AACJ,CAtBD;;AAwBA,eAAeD,UAAf"},"metadata":{},"sourceType":"module"}
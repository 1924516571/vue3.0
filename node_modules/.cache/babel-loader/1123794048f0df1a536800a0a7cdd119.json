{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\n\n/*\r\n * @Author: your name\r\n * @Date: 2021-03-12 14:10:03\r\n * @LastEditTime: 2021-03-26 09:04:37\r\n * @LastEditors: Please set LastEditors\r\n * @Description: In User Settings Edit\r\n * @FilePath: \\vue3-element-admin\\src\\directives\\modules\\permission.js\r\n */\nconst permission = (el, binding, app, router, store) => {\n  const {\n    value\n  } = binding;\n\n  function checkArray(permission) {\n    let path = app.config.globalProperties.$route.name;\n\n    let _permission = permission.map(element => {\n      let url = path.replace(/-/g, \"/\") + \"/\" + element;\n      return url;\n    });\n\n    let arr = store.getters.permissionList;\n    return _permission.some(key => arr.includes(key));\n  }\n\n  if (value && value.length > 0) {\n    let hasPermission = checkArray(value);\n\n    if (!hasPermission) {\n      // 没有权限 移除Dom元素\n      el.parentNode && el.parentNode.removeChild(el);\n    }\n  }\n};\n\nexport default permission;","map":{"version":3,"names":["permission","el","binding","app","router","store","value","checkArray","path","config","globalProperties","$route","name","_permission","map","element","url","replace","arr","getters","permissionList","some","key","includes","length","hasPermission","parentNode","removeChild"],"sources":["C:/Users/Administrator/Desktop/vue3-element-admin-dev/src/directives/modules/permission.js"],"sourcesContent":["/*\r\n * @Author: your name\r\n * @Date: 2021-03-12 14:10:03\r\n * @LastEditTime: 2021-03-26 09:04:37\r\n * @LastEditors: Please set LastEditors\r\n * @Description: In User Settings Edit\r\n * @FilePath: \\vue3-element-admin\\src\\directives\\modules\\permission.js\r\n */\r\n\r\nconst permission = (el, binding, app, router, store) => {\r\n    const { value } = binding;\r\n    function checkArray(permission) {\r\n        let path = app.config.globalProperties.$route.name;\r\n\r\n        let _permission = permission.map((element) => {\r\n            let url = path.replace(/-/g, \"/\") + \"/\" + element;\r\n            return url;\r\n        });\r\n        let arr = store.getters.permissionList;\r\n        return _permission.some((key) => arr.includes(key));\r\n    }\r\n\r\n    if (value && value.length > 0) {\r\n        let hasPermission = checkArray(value);\r\n        if (!hasPermission) {\r\n            // 没有权限 移除Dom元素\r\n            el.parentNode && el.parentNode.removeChild(el);\r\n        }\r\n    }\r\n};\r\n\r\nexport default permission;\r\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,MAAMA,UAAU,GAAG,CAACC,EAAD,EAAKC,OAAL,EAAcC,GAAd,EAAmBC,MAAnB,EAA2BC,KAA3B,KAAqC;EACpD,MAAM;IAAEC;EAAF,IAAYJ,OAAlB;;EACA,SAASK,UAAT,CAAoBP,UAApB,EAAgC;IAC5B,IAAIQ,IAAI,GAAGL,GAAG,CAACM,MAAJ,CAAWC,gBAAX,CAA4BC,MAA5B,CAAmCC,IAA9C;;IAEA,IAAIC,WAAW,GAAGb,UAAU,CAACc,GAAX,CAAgBC,OAAD,IAAa;MAC1C,IAAIC,GAAG,GAAGR,IAAI,CAACS,OAAL,CAAa,IAAb,EAAmB,GAAnB,IAA0B,GAA1B,GAAgCF,OAA1C;MACA,OAAOC,GAAP;IACH,CAHiB,CAAlB;;IAIA,IAAIE,GAAG,GAAGb,KAAK,CAACc,OAAN,CAAcC,cAAxB;IACA,OAAOP,WAAW,CAACQ,IAAZ,CAAkBC,GAAD,IAASJ,GAAG,CAACK,QAAJ,CAAaD,GAAb,CAA1B,CAAP;EACH;;EAED,IAAIhB,KAAK,IAAIA,KAAK,CAACkB,MAAN,GAAe,CAA5B,EAA+B;IAC3B,IAAIC,aAAa,GAAGlB,UAAU,CAACD,KAAD,CAA9B;;IACA,IAAI,CAACmB,aAAL,EAAoB;MAChB;MACAxB,EAAE,CAACyB,UAAH,IAAiBzB,EAAE,CAACyB,UAAH,CAAcC,WAAd,CAA0B1B,EAA1B,CAAjB;IACH;EACJ;AACJ,CApBD;;AAsBA,eAAeD,UAAf"},"metadata":{},"sourceType":"module"}
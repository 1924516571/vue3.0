{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveDirective as _resolveDirective, openBlock as _openBlock, createBlock as _createBlock, withDirectives as _withDirectives, withModifiers as _withModifiers, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"ve_container\"\n};\n\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\"重置\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_input = _resolveComponent(\"el-input\");\n\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n\n  const _component_el_button = _resolveComponent(\"el-button\");\n\n  const _component_el_form = _resolveComponent(\"el-form\");\n\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n\n  const _component_el_tag = _resolveComponent(\"el-tag\");\n\n  const _component_ve_table = _resolveComponent(\"ve-table\");\n\n  const _directive_permission = _resolveDirective(\"permission\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" 搜索 \"), _createVNode(_component_el_form, {\n    ref: \"queryForm\",\n    inline: true,\n    model: $setup.params\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_form_item, {\n      label: \"名称\",\n      prop: \"name\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        clearable: \"\",\n        modelValue: $setup.name,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.name = $event),\n        placeholder: \"请输入\"\n      }, null, 8\n      /* PROPS */\n      , [\"modelValue\"])]),\n      _: 1\n      /* STABLE */\n\n    }), _createVNode(_component_el_form_item, null, {\n      default: _withCtx(() => [_createVNode(_component_el_button, {\n        type: \"primary\",\n        onClick: _cache[1] || (_cache[1] = $event => $setup.onSubmit($setup.params, $setup.getDataList))\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString(_ctx.menus.search.name), 1\n        /* TEXT */\n        )]),\n        _: 1\n        /* STABLE */\n\n      }), _createVNode(_component_el_button, {\n        onClick: _cache[2] || (_cache[2] = $event => $setup.resetForm($setup.queryForm, $setup.params, $setup.getDataList))\n      }, {\n        default: _withCtx(() => [_hoisted_2]),\n        _: 1\n        /* STABLE */\n\n      })]),\n      _: 1\n      /* STABLE */\n\n    })]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"model\"]), _createCommentVNode(\" 列表 \"), _createVNode(_component_ve_table, {\n    table: {\n      data: $setup.tableData\n    },\n    pagination: {\n      onSizeChange: val => $setup.handleSizeChange(val, $setup.params, $setup.getDataList),\n      onCurrentChange: val => $setup.handleCurrentChange(val, $setup.params, $setup.getDataList),\n      currentPage: $setup.page,\n      pageSize: $setup.limit,\n      total: $setup.total\n    }\n  }, {\n    tool_bar: _withCtx(() => [_withDirectives((_openBlock(), _createBlock(_component_el_button, {\n      size: \"small\",\n      type: \"primary\",\n      onClick: _cache[3] || (_cache[3] = $event => $setup.handleEdit(_ctx.menus.add.name))\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString(_ctx.menus.add.name), 1\n      /* TEXT */\n      )]),\n      _: 1\n      /* STABLE */\n\n    })), [[_directive_permission, ['add']]])]),\n    default: _withCtx(() => [_createVNode(_component_el_table_column, {\n      prop: \"name\",\n      label: \"名称\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"roleName\",\n      label: \"角色名\",\n      width: \"120\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"status\",\n      label: \"状态\"\n    }, {\n      default: _withCtx(({\n        row\n      }) => [_createVNode(_component_el_tag, {\n        type: row.status == 0 ? 'danger' : ''\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString(row.status == 0 ? \"停用\" : \"启用\"), 1\n        /* TEXT */\n        )]),\n        _: 2\n        /* DYNAMIC */\n\n      }, 1032\n      /* PROPS, DYNAMIC_SLOTS */\n      , [\"type\"])]),\n      _: 1\n      /* STABLE */\n\n    }), _createVNode(_component_el_table_column, {\n      fixed: \"right\",\n      label: \"操作\"\n    }, {\n      default: _withCtx(({\n        row\n      }) => [_withDirectives((_openBlock(), _createBlock(_component_el_button, {\n        onClick: _withModifiers($event => $setup.handleEdit(_ctx.menus.edit.name, row), [\"prevent\"]),\n        type: \"primary\",\n        size: \"small\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString(_ctx.menus.edit.name), 1\n        /* TEXT */\n        )]),\n        _: 2\n        /* DYNAMIC */\n\n      }, 1032\n      /* PROPS, DYNAMIC_SLOTS */\n      , [\"onClick\"])), [[_directive_permission, ['edit']]]), _withDirectives((_openBlock(), _createBlock(_component_el_button, {\n        onClick: _withModifiers($event => $setup.handleDel(row.id), [\"prevent\"]),\n        type: \"danger\",\n        size: \"small\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString(_ctx.menus.del.name), 1\n        /* TEXT */\n        )]),\n        _: 2\n        /* DYNAMIC */\n\n      }, 1032\n      /* PROPS, DYNAMIC_SLOTS */\n      , [\"onClick\"])), [[_directive_permission, ['del']]]), _withDirectives((_openBlock(), _createBlock(_component_el_button, {\n        onClick: _withModifiers($event => $setup.allMember(row.id), [\"prevent\"]),\n        type: \"info\",\n        size: \"small\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString(_ctx.menus.member.name), 1\n        /* TEXT */\n        )]),\n        _: 2\n        /* DYNAMIC */\n\n      }, 1032\n      /* PROPS, DYNAMIC_SLOTS */\n      , [\"onClick\"])), [[_directive_permission, ['member']]])]),\n      _: 1\n      /* STABLE */\n\n    })]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"table\", \"pagination\"]), _createCommentVNode(\" 编辑组件 \"), $setup.showDialog ? (_openBlock(), _createBlock($setup[\"RoleEdit\"], {\n    key: 0,\n    rowData: $setup.rowData,\n    title: $setup.dialogTitle,\n    showDialog: $setup.showDialog,\n    onCloseDialog: _cache[4] || (_cache[4] = $event => $setup.handelDialog($event))\n  }, null, 8\n  /* PROPS */\n  , [\"rowData\", \"title\", \"showDialog\"])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"mappings":"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","names":["class","_createElementBlock","_createCommentVNode","_createVNode","_component_el_form","ref","inline","model","$setup","_component_el_form_item","label","prop","_component_el_input","clearable","$event","placeholder","_component_el_button","type","onClick","_ctx","search","name","_component_ve_table","table","pagination","val","tool_bar","_createBlock","size","add","_component_el_table_column","width","row","_component_el_tag","status","fixed","default","edit","id","del","member","rowData","title","showDialog","onCloseDialog"],"sourceRoot":"","sources":["C:\\Users\\Administrator\\Desktop\\vue3-element-admin-dev\\src\\views\\layoutpages\\system\\Roles.vue"],"sourcesContent":["<template>\r\n    <div class=\"ve_container\">\r\n        <!-- 搜索 -->\r\n        <el-form ref=\"queryForm\" :inline=\"true\" :model=\"params\">\r\n            <el-form-item label=\"名称\" prop=\"name\">\r\n                <el-input clearable v-model=\"name\" placeholder=\"请输入\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-button type=\"primary\" @click=\"onSubmit(params, getDataList)\">\r\n                    {{ menus.search.name }}\r\n                </el-button>\r\n                <el-button @click=\"resetForm(queryForm, params, getDataList)\">重置</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n\r\n        <!-- 列表 -->\r\n        <ve-table\r\n            :table=\"{\r\n                data: tableData,\r\n            }\"\r\n            :pagination=\"{\r\n                onSizeChange: (val) => handleSizeChange(val, params, getDataList),\r\n                onCurrentChange: (val) => handleCurrentChange(val, params, getDataList),\r\n                currentPage: page,\r\n                pageSize: limit,\r\n                total: total,\r\n            }\"\r\n        >\r\n            <template #tool_bar>\r\n                <el-button v-permission=\"['add']\" size=\"small\" type=\"primary\" @click=\"handleEdit(menus.add.name)\">\r\n                    {{ menus.add.name }}\r\n                </el-button>\r\n            </template>\r\n            <el-table-column prop=\"name\" label=\"名称\"></el-table-column>\r\n            <el-table-column prop=\"roleName\" label=\"角色名\" width=\"120\"></el-table-column>\r\n            <el-table-column prop=\"status\" label=\"状态\">\r\n                <template v-slot=\"{ row }\">\r\n                    <el-tag :type=\"row.status == 0 ? 'danger' : ''\">\r\n                        {{ row.status == 0 ? \"停用\" : \"启用\" }}\r\n                    </el-tag>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column fixed=\"right\" label=\"操作\">\r\n                <template v-slot:default=\"{ row }\">\r\n                    <el-button v-permission=\"['edit']\" @click.prevent=\"handleEdit(menus.edit.name, row)\" type=\"primary\" size=\"small\">\r\n                        {{ menus.edit.name }}\r\n                    </el-button>\r\n                    <el-button v-permission=\"['del']\" @click.prevent=\"handleDel(row.id)\" type=\"danger\" size=\"small\">\r\n                        {{ menus.del.name }}\r\n                    </el-button>\r\n                    <el-button v-permission=\"['member']\" @click.prevent=\"allMember(row.id)\" type=\"info\" size=\"small\">\r\n                        {{ menus.member.name }}\r\n                    </el-button>\r\n                </template>\r\n            </el-table-column>\r\n        </ve-table>\r\n\r\n        <!-- 编辑组件 -->\r\n        <role-edit v-if=\"showDialog\" :rowData=\"rowData\" :title=\"dialogTitle\" :showDialog=\"showDialog\" @closeDialog=\"handelDialog($event)\" />\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    data: () => ({\r\n        description: \"角色信息查询与设置\",\r\n        menus: {\r\n            search: { name: \"查询\" },\r\n            add: { name: \"添加\" },\r\n            edit: { name: \"编辑\" },\r\n            del: { name: \"删除\" },\r\n            member: { name: \"查看成员\", toPath: true }, //topath:true 需要设置跳转路径\r\n        },\r\n    }),\r\n};\r\n</script>\r\n\r\n<script setup>\r\nimport RoleEdit from \"./components/RoleEdit\";\r\nimport { reactive, toRefs, computed, ref, onMounted, getCurrentInstance } from \"vue\";\r\nimport { useRoute, useRouter } from \"vue-router\";\r\nimport { useStore } from \"vuex\";\r\nimport { findName } from \"../common\";\r\n\r\n//*导入公共查询方法\r\nimport { onSubmit, resetForm, handleSizeChange, handleCurrentChange } from \"@/views/layoutpages/common\";\r\n\r\nconst { proxy } = getCurrentInstance();\r\nconst route = useRoute();\r\nconst router = useRouter();\r\nconst store = useStore();\r\nconst menuList = computed(() => store.getters.menuList).value;\r\n\r\nconst rowData = ref(null);\r\nconst dialogTitle = ref(\"\");\r\nconst showDialog = ref(false);\r\n\r\nconst queryForm = ref(null);\r\nconst tableData = ref([]);\r\nconst params = reactive({\r\n    name: \"\",\r\n    limit: 10,\r\n    page: 1,\r\n    total: 0,\r\n});\r\nconst { name, limit, page, total } = toRefs(params);\r\n\r\n/**\r\n * @description:添加or编辑事件\r\n * @param {*}\r\n * @return {*}\r\n */\r\nconst handleEdit = (title, row = null) => {\r\n    showDialog.value = true;\r\n    dialogTitle.value = title;\r\n    rowData.value = row;\r\n};\r\n/**\r\n * @description: dialog事件\r\n * @param {*}\r\n * @return {*}\r\n */\r\nconst handelDialog = (e) => {\r\n    showDialog.value = e;\r\n    getDataList();\r\n};\r\n/**删除行数据\r\n * @description:\r\n * @param {*}\r\n * @return {*}\r\n */\r\nconst handleDel = (id) => {\r\n    proxy\r\n        .$confirm(\"此操作将永久删除该数据, 是否继续?\", \"提示\", {\r\n            confirmButtonText: \"确定\",\r\n            cancelButtonText: \"取消\",\r\n            type: \"error\",\r\n        })\r\n        .then(async () => {\r\n            const { code } = await VE_API.system.roleDel({ id });\r\n            if (code == \"00\") {\r\n                getDataList();\r\n            }\r\n        })\r\n        .catch(() => {\r\n            proxy.$message({\r\n                type: \"info\",\r\n                message: \"已取消删除\",\r\n            });\r\n        });\r\n};\r\n/**\r\n * @description:查看成员\r\n * @param {*}\r\n * @return {*}\r\n */\r\nconst allMember = (id) => {\r\n    // 获取当前path的id\r\n    let pathId = route.name.slice(route.name.lastIndexOf(\"-\") + 1);\r\n    // 获取要跳转到的路由\r\n    const toName = findName(\"member\", \"system/Users\", pathId, menuList, proxy);\r\n    router.push({ name: toName, query: { id } });\r\n};\r\n/**\r\n * @description: 获取列表数据\r\n * @param {*}\r\n * @return {*}\r\n */\r\nconst getDataList = async () => {\r\n    const { code, data } = await VE_API.system.roleList(params);\r\n    if (code == \"00\") {\r\n        const { limit, page, total, list } = data;\r\n        params.limit = limit;\r\n        params.page = page;\r\n        params.total = total;\r\n        tableData.value = list;\r\n    }\r\n};\r\nonMounted(async () => {\r\n    await getDataList();\r\n    // maxHeight(pagination, queryForm, toolBar, ve_max_height);\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n"]},"metadata":{},"sourceType":"module"}